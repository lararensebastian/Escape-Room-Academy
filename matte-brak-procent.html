<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Havets Hemligheter - Br√•k & Procent</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Comfortaa:wght@700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(180deg, #001f3f 0%, #003d5c 30%, #005577 60%, #0088aa 100%);
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #e0f7ff;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 30% 20%, rgba(0, 191, 255, 0.15) 0%, transparent 30%),
                radial-gradient(circle at 70% 60%, rgba(0, 139, 139, 0.15) 0%, transparent 35%),
                radial-gradient(circle at 20% 80%, rgba(64, 224, 208, 0.1) 0%, transparent 40%);
            pointer-events: none;
            animation: wave 20s ease-in-out infinite;
        }

        @keyframes wave {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .bubbles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .bubble {
            position: absolute;
            bottom: -100px;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.05));
            border-radius: 50%;
            opacity: 0.6;
            animation: rise 15s infinite ease-in;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .bubble:nth-child(1) { left: 10%; width: 30px; height: 30px; animation-delay: 0s; animation-duration: 12s; }
        .bubble:nth-child(2) { left: 25%; width: 50px; height: 50px; animation-delay: 2s; animation-duration: 14s; }
        .bubble:nth-child(3) { left: 45%; width: 25px; height: 25px; animation-delay: 4s; animation-duration: 10s; }
        .bubble:nth-child(4) { left: 65%; width: 35px; height: 35px; animation-delay: 6s; animation-duration: 16s; }
        .bubble:nth-child(5) { left: 80%; width: 45px; height: 45px; animation-delay: 3s; animation-duration: 13s; }
        .bubble:nth-child(6) { left: 90%; width: 28px; height: 28px; animation-delay: 7s; animation-duration: 11s; }

        @keyframes rise {
            0% {
                bottom: -100px;
                transform: translateX(0);
            }
            50% {
                transform: translateX(100px);
            }
            100% {
                bottom: 1080px;
                transform: translateX(-100px);
            }
        }

        .fish {
            position: absolute;
            font-size: 2.5em;
            opacity: 0.3;
            animation: swim 25s linear infinite;
        }

        .fish1 { top: 15%; animation-duration: 20s; animation-delay: 0s; }
        .fish2 { top: 40%; animation-duration: 30s; animation-delay: 5s; }
        .fish3 { top: 65%; animation-duration: 25s; animation-delay: 10s; }

        @keyframes swim {
            0% { left: -100px; }
            100% { left: calc(100% + 100px); }
        }

        .container {
            max-width: 950px;
            width: 100%;
            background: linear-gradient(135deg, rgba(0, 45, 70, 0.95) 0%, rgba(0, 60, 90, 0.95) 100%);
            border-radius: 30px;
            box-shadow: 
                0 30px 90px rgba(0, 0, 0, 0.6),
                inset 0 0 100px rgba(0, 150, 200, 0.1),
                0 0 0 2px rgba(0, 191, 255, 0.3);
            overflow: hidden;
            border: 3px solid rgba(64, 224, 208, 0.3);
            position: relative;
            z-index: 10;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 3px,
                    rgba(255, 255, 255, 0.03) 3px,
                    rgba(255, 255, 255, 0.03) 6px
                );
            pointer-events: none;
            opacity: 0.5;
        }

        .header {
            background: linear-gradient(135deg, rgba(0, 60, 90, 0.9) 0%, rgba(0, 80, 120, 0.9) 100%);
            color: #e0f7ff;
            padding: 45px 40px;
            text-align: center;
            border-bottom: 4px solid rgba(64, 224, 208, 0.5);
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .header::after {
            content: 'üåä';
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2em;
            opacity: 0.2;
        }

        .header h1 {
            font-family: 'Comfortaa', sans-serif;
            font-size: 3.8em;
            margin-bottom: 12px;
            text-shadow: 
                3px 3px 8px rgba(0, 0, 0, 0.7),
                0 0 30px rgba(64, 224, 208, 0.5);
            letter-spacing: 3px;
            color: #40e0d0;
        }

        .subtitle {
            font-style: italic;
            font-size: 1.5em;
            opacity: 0.9;
            margin-top: 12px;
            letter-spacing: 2px;
            color: #87ceeb;
        }

        .timer {
            font-size: 1.7em;
            font-weight: bold;
            color: #40e0d0;
            margin-top: 20px;
            font-family: 'Comfortaa', sans-serif;
            text-shadow: 0 0 15px rgba(64, 224, 208, 0.6);
        }

        .content {
            padding: 55px 45px;
            position: relative;
            z-index: 2;
        }

        .start-screen, .room {
            display: none;
        }

        .start-screen.active, .room.active {
            display: block;
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .start-screen {
            text-align: center;
        }

        .start-screen h2 {
            font-family: 'Comfortaa', sans-serif;
            color: #40e0d0;
            margin-bottom: 35px;
            font-size: 3em;
            text-shadow: 0 0 30px rgba(64, 224, 208, 0.4);
            letter-spacing: 2px;
        }

        .start-screen p {
            font-size: 1.35em;
            line-height: 2;
            margin-bottom: 28px;
            color: #e0f7ff;
            text-align: left;
            padding: 0 25px;
        }

        .story-box {
            background: rgba(0, 0, 0, 0.4);
            padding: 40px;
            border-radius: 20px;
            border: 2px solid rgba(64, 224, 208, 0.3);
            margin: 35px 0;
            border-left: 6px solid #40e0d0;
            box-shadow: 
                inset 0 0 40px rgba(0, 0, 0, 0.5),
                0 8px 30px rgba(0, 0, 0, 0.3);
        }

        .btn {
            background: linear-gradient(135deg, #0088aa 0%, #00bfff 100%);
            color: #fff;
            border: 3px solid #40e0d0;
            padding: 20px 55px;
            font-size: 1.5em;
            font-family: 'Comfortaa', sans-serif;
            cursor: pointer;
            transition: all 0.4s;
            box-shadow: 
                0 6px 25px rgba(0, 150, 200, 0.5),
                inset 0 0 30px rgba(255, 255, 255, 0.1);
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-top: 30px;
            border-radius: 50px;
            font-weight: 700;
        }

        .btn:hover {
            background: linear-gradient(135deg, #00bfff 0%, #40e0d0 100%);
            box-shadow: 
                0 10px 35px rgba(64, 224, 208, 0.6),
                inset 0 0 30px rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
            border-color: #87ceeb;
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .room h2 {
            font-family: 'Comfortaa', sans-serif;
            color: #40e0d0;
            margin-bottom: 32px;
            font-size: 2.5em;
            text-shadow: 0 0 25px rgba(64, 224, 208, 0.4);
            letter-spacing: 2px;
            border-bottom: 3px solid rgba(64, 224, 208, 0.4);
            padding-bottom: 18px;
        }

        .puzzle {
            background: rgba(0, 0, 0, 0.35);
            padding: 35px;
            border-radius: 18px;
            margin-bottom: 32px;
            border: 2px solid rgba(64, 224, 208, 0.25);
            border-left: 6px solid #40e0d0;
            box-shadow: 
                inset 0 0 35px rgba(0, 0, 0, 0.4),
                0 6px 25px rgba(0, 0, 0, 0.3);
        }

        .puzzle h3 {
            font-family: 'Comfortaa', sans-serif;
            color: #87ceeb;
            margin-bottom: 25px;
            font-size: 1.8em;
            letter-spacing: 1px;
        }

        .puzzle p {
            line-height: 1.9;
            margin-bottom: 20px;
            color: #e0f7ff;
            font-size: 1.2em;
        }

        .math-box {
            background: rgba(0, 0, 0, 0.5);
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            border-left: 4px solid #87ceeb;
            color: #40e0d0;
            font-size: 1.4em;
            box-shadow: inset 0 0 25px rgba(0, 0, 0, 0.6);
            line-height: 1.8;
            font-family: 'Courier New', monospace;
            text-align: center;
            font-weight: bold;
        }

        .fraction {
            display: inline-block;
            vertical-align: middle;
            text-align: center;
            margin: 0 5px;
        }

        .fraction-top {
            display: block;
            padding-bottom: 3px;
            border-bottom: 2px solid #40e0d0;
        }

        .fraction-bottom {
            display: block;
            padding-top: 3px;
        }

        input[type="text"], input[type="number"], select {
            width: 100%;
            padding: 18px;
            font-size: 1.3em;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(64, 224, 208, 0.4);
            border-radius: 12px;
            margin-bottom: 18px;
            transition: all 0.3s;
            color: #e0f7ff;
            font-family: 'Quicksand', sans-serif;
        }

        select {
            cursor: pointer;
        }

        select option {
            background: #003d5c;
            color: #e0f7ff;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #40e0d0;
            background: rgba(0, 0, 0, 0.7);
            box-shadow: 0 0 25px rgba(64, 224, 208, 0.4);
        }

        input::placeholder {
            color: rgba(224, 247, 255, 0.5);
        }

        .feedback {
            padding: 20px;
            border-radius: 12px;
            margin-top: 18px;
            font-weight: bold;
            display: none;
            font-family: 'Comfortaa', sans-serif;
            letter-spacing: 1px;
            font-size: 1.15em;
        }

        .feedback.success {
            background: rgba(64, 224, 208, 0.3);
            color: #40e0d0;
            border: 2px solid #40e0d0;
            display: block;
            box-shadow: 0 0 25px rgba(64, 224, 208, 0.5);
        }

        .feedback.error {
            background: rgba(255, 99, 71, 0.3);
            color: #ff6347;
            border: 2px solid #ff6347;
            display: block;
            box-shadow: 0 0 25px rgba(255, 99, 71, 0.5);
        }

        .progress {
            background: rgba(0, 0, 0, 0.6);
            height: 42px;
            border-radius: 21px;
            overflow: hidden;
            margin-bottom: 35px;
            border: 2px solid rgba(64, 224, 208, 0.4);
            box-shadow: inset 0 0 25px rgba(0, 0, 0, 0.7);
        }

        .progress-bar {
            background: linear-gradient(90deg, #0088aa 0%, #00bfff 50%, #40e0d0 100%);
            height: 100%;
            transition: width 0.6s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: bold;
            font-family: 'Comfortaa', sans-serif;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            box-shadow: 0 0 30px rgba(64, 224, 208, 0.5);
            font-size: 1.15em;
        }

        .hint-btn {
            background: rgba(255, 215, 0, 0.25);
            color: #ffd700;
            border: 2px solid #ffd700;
            padding: 12px 28px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 18px;
            transition: all 0.3s;
            font-family: 'Comfortaa', sans-serif;
            letter-spacing: 1px;
        }

        .hint-btn:hover {
            background: rgba(255, 215, 0, 0.4);
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.5);
            transform: scale(1.05);
        }

        .hint {
            background: rgba(255, 215, 0, 0.15);
            padding: 25px;
            border-radius: 12px;
            margin-top: 18px;
            border-left: 5px solid #ffd700;
            display: none;
            color: #fffacd;
            box-shadow: inset 0 0 25px rgba(0, 0, 0, 0.5);
            line-height: 1.8;
        }

        .victory {
            text-align: center;
            padding: 60px 30px;
        }

        .victory h2 {
            color: #40e0d0;
            font-size: 4em;
            margin-bottom: 35px;
            font-family: 'Comfortaa', sans-serif;
            text-shadow: 0 0 40px rgba(64, 224, 208, 0.6);
            letter-spacing: 4px;
        }

        .victory p {
            font-size: 1.6em;
            color: #e0f7ff;
            margin: 25px 0;
            line-height: 2;
        }

        .emoji {
            font-size: 6em;
            margin: 35px 0;
            filter: drop-shadow(0 0 30px rgba(64, 224, 208, 0.5));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .visual-fraction {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .fraction-visual {
            width: 80px;
            height: 80px;
            border: 3px solid #40e0d0;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
        }

        .fraction-filled {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: linear-gradient(180deg, #40e0d0 0%, #0088aa 100%);
            transition: height 0.3s;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2.8em; }
            .content { padding: 40px 30px; }
            .visual-fraction { gap: 10px; }
            .fraction-visual { width: 60px; height: 60px; }
        }
    </style>
</head>
<body>
    <div class="bubbles">
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
    </div>
    
    <div class="fish fish1">üê†</div>
    <div class="fish fish2">üêü</div>
    <div class="fish fish3">üê°</div>

    <div class="container">
        <div class="header">
            <h1>üåä HAVETS HEMLIGHETER üåä</h1>
            <div class="subtitle">Br√•k & Procent under Ytan</div>
            <div class="timer" id="timer">Tid: 00:00</div>
            <div class="progress">
                <div class="progress-bar" id="progressBar" style="width: 0%">V√•g 0/15</div>
            </div>
        </div>

        <div class="content">
            <!-- Start Screen -->
            <div class="start-screen active" id="startScreen">
                <h2>V√§lkommen till Djupen!</h2>
                
                <div class="story-box">
                    <p>Du har dykt ner till den legendariska Korallpalatset, ett undervattensrike d√§r matematikens mest mystiska skatter f√∂rvaras. Men palatset √§r √∂versv√§mmat av 15 v√•gor av utmaningar ‚Äì alla kretsar kring br√•k och procent.</p>
                    
                    <p>Havets v√§ktare har lagt ut g√•tor som testar din f√∂rm√•ga att f√∂rst√• delar av helheter, omvandla mellan olika former och ber√§kna proportioner. Endast den som beh√§rskar br√•kens och procentens konst kan ta sig genom alla v√•gor och n√• till skattkammaren.</p>
                    
                    <p>Luften i din syretank r√§cker en stund ‚Äì men hur l√§nge? Ju snabbare du l√∂ser uppgifterna, desto mer syre sparar du. Varje r√§tt svar √∂ppnar en ny passage genom korallreven.</p>
                    
                    <p style="text-align: center; font-style: italic; margin-top: 35px; font-size: 1.3em;">√Ñr du redo att dyka in i matematikens djup?</p>
                </div>
                
                <button class="btn" onclick="startGame()">Dyk ner!</button>
            </div>

            <!-- V√•g 1: Grundl√§ggande br√•k -->
            <div class="room" id="room1">
                <h2>üêö V√•g 1: Br√•kens Grotta</h2>
                <div class="puzzle">
                    <h3>F√∂renkla Br√•ket</h3>
                    <p>En korall √§r delad i lika stora delar:</p>
                    
                    <div class="math-box">
                        <div class="fraction">
                            <span class="fraction-top">4</span>
                            <span class="fraction-bottom">8</span>
                        </div>
                    </div>
                    
                    <p>F√∂renkla br√•ket till l√§gsta form. Skriv t√§ljare och n√§mnare √•tskilda med / (t.ex. 1/2)</p>
                    
                    <input type="text" id="answer1" placeholder="Skriv br√•ket...">
                    <button class="btn" onclick="checkAnswer(1)">Simma vidare</button>
                    <button class="hint-btn" onclick="toggleHint(1)">üêö Havets visdom</button>
                    <div class="hint" id="hint1">
                        <strong>Fr√•n djupen:</strong> B√•da talen (4 och 8) kan delas med samma tal. Vilket √§r det st√∂rsta talet som g√•r j√§mnt upp i b√•de 4 och 8?
                    </div>
                    <div class="feedback" id="feedback1"></div>
                </div>
            </div>

            <!-- V√•g 2: Br√•k till decimal -->
            <div class="room" id="room2">
                <h2>ü¶Ä V√•g 2: Decimalernas Passage</h2>
                <div class="puzzle">
                    <h3>Fr√•n Br√•k till Decimal</h3>
                    <p>Omvandla detta br√•k till decimaltal:</p>
                    
                    <div class="math-box">
                        <div class="fraction">
                            <span class="fraction-top">3</span>
                            <span class="fraction-bottom">4</span>
                        </div>
                        = ?
                    </div>
                    
                    <p>Skriv svaret som decimaltal (t.ex. 0.5)</p>
                    
                    <input type="text" id="answer2" placeholder="Ditt svar...">
                    <button class="btn" onclick="checkAnswer(2)">√ñppna porten</button>
                    <button class="hint-btn" onclick="toggleHint(2)">üêö Havets visdom</button>
                    <div class="hint" id="hint2">
                        <strong>Fr√•n djupen:</strong> Dela t√§ljaren (3) med n√§mnaren (4). Vad blir 3 √∑ 4?
                    </div>
                    <div class="feedback" id="feedback2"></div>
                </div>
            </div>

            <!-- V√•g 3: Procent till br√•k -->
            <div class="room" id="room3">
                <h2>üêô V√•g 3: Procentens Port</h2>
                <div class="puzzle">
                    <h3>Fr√•n Procent till Br√•k</h3>
                    <p>En bl√§ckfisk har t√§ckt 25% av havsytan med sitt bl√§ck.</p>
                    
                    <div class="math-box">25% = ?</div>
                    
                    <p>Skriv 25% som ett f√∂renklat br√•k (t.ex. 1/4)</p>
                    
                    <input type="text" id="answer3" placeholder="?/?">
                    <button class="btn" onclick="checkAnswer(3)">Klar dig igenom bl√§cket</button>
                    <button class="hint-btn" onclick="toggleHint(3)">üêö Havets visdom</button>
                    <div class="hint" id="hint3">
                        <strong>Fr√•n djupen:</strong> Procent betyder "per hundra", s√• 25% = 25/100. Kan du f√∂renkla 25/100?
                    </div>
                    <div class="feedback" id="feedback3"></div>
                </div>
            </div>

            <!-- V√•g 4: Addition av br√•k -->
            <div class="room" id="room4">
                <h2>ü¶ë V√•g 4: Sammanslagna Str√∂mmar</h2>
                <div class="puzzle">
                    <h3>Addera Br√•ken</h3>
                    <p>Tv√• havsstr√∂mmar m√∂ts:</p>
                    
                    <div class="math-box">
                        <div class="fraction">
                            <span class="fraction-top">1</span>
                            <span class="fraction-bottom">3</span>
                        </div>
                        +
                        <div class="fraction">
                            <span class="fraction-top">1</span>
                            <span class="fraction-bottom">3</span>
                        </div>
                        = ?
                    </div>
                    
                    <p>Skriv summan som ett f√∂renklat br√•k (t.ex. 2/3)</p>
                    
                    <input type="text" id="answer4" placeholder="?/?">
                    <button class="btn" onclick="checkAnswer(4)">F√∂lj str√∂mmen</button>
                    <button class="hint-btn" onclick="toggleHint(4)">üêö Havets visdom</button>
                    <div class="hint" id="hint4">
                        <strong>Fr√•n djupen:</strong> N√§r br√•k har samma n√§mnare adderar du bara t√§ljarna. 1 + 1 = ?
                    </div>
                    <div class="feedback" id="feedback4"></div>
                </div>
            </div>

            <!-- V√•g 5: Procent av ett tal -->
            <div class="room" id="room5">
                <h2>üê¢ V√•g 5: Sk√∂ldpaddornas Resa</h2>
                <div class="puzzle">
                    <h3>Ber√§kna Procentdelen</h3>
                    <p>Det finns 80 havsk√∂ldpaddor i revet. 25% av dem √§r ungar.</p>
                    
                    <div class="math-box">25% av 80 = ?</div>
                    
                    <p>Hur m√•nga ungar finns det?</p>
                    
                    <input type="number" id="answer5" placeholder="Antal ungar...">
                    <button class="btn" onclick="checkAnswer(5)">R√§kna sk√∂ldpaddorna</button>
                    <button class="hint-btn" onclick="toggleHint(5)">üêö Havets visdom</button>
                    <div class="hint" id="hint5">
                        <strong>Fr√•n djupen:</strong> 25% √§r samma som 1/4. Vad √§r 80 delat med 4? Eller r√§kna 80 √ó 0,25.
                    </div>
                    <div class="feedback" id="feedback5"></div>
                </div>
            </div>

            <!-- V√•g 6: Br√•k av ett tal -->
            <div class="room" id="room6">
                <h2>ü¶à V√•g 6: Hajens Jaktmark</h2>
                <div class="puzzle">
                    <h3>Hitta Delen av Helheten</h3>
                    <p>En haj har √§tit 2/5 av en fiskstim p√• 60 fiskar.</p>
                    
                    <div class="math-box">
                        <div class="fraction">
                            <span class="fraction-top">2</span>
                            <span class="fraction-bottom">5</span>
                        </div>
                        av 60 = ?
                    </div>
                    
                    <p>Hur m√•nga fiskar har hajen √§tit?</p>
                    
                    <input type="number" id="answer6" placeholder="Antal fiskar...">
                    <button class="btn" onclick="checkAnswer(6)">Undvik hajen</button>
                    <button class="hint-btn" onclick="toggleHint(6)">üêö Havets visdom</button>
                    <div class="hint" id="hint6">
                        <strong>Fr√•n djupen:</strong> "Av" betyder multiplicera. F√∂rst: 60 √∑ 5 = ? Sedan: multiplicera med 2.
                    </div>
                    <div class="feedback" id="feedback6"></div>
                </div>
            </div>

            <!-- V√•g 7: F√∂r√§ndring i procent -->
            <div class="room" id="room7">
                <h2>üå°Ô∏è V√•g 7: Temperaturens V√•g</h2>
                <div class="puzzle">
                    <h3>Procentuell √ñkning</h3>
                    <p>Vattentemperaturen var 20¬∞C. Den √∂kade med 15%.</p>
                    
                    <div class="math-box">20¬∞C + 15% = ?</div>
                    
                    <p>Vad √§r den nya temperaturen? (Heltal)</p>
                    
                    <input type="number" id="answer7" placeholder="Nya temperaturen...">
                    <button class="btn" onclick="checkAnswer(7)">M√§t temperaturen</button>
                    <button class="hint-btn" onclick="toggleHint(7)">üêö Havets visdom</button>
                    <div class="hint" id="hint7">
                        <strong>Fr√•n djupen:</strong> F√∂rst r√§kna ut 15% av 20 (20 √ó 0,15 = 3). L√§gg sedan till detta p√• 20.
                    </div>
                    <div class="feedback" id="feedback7"></div>
                </div>
            </div>

            <!-- V√•g 8: Multiplikation av br√•k -->
            <div class="room" id="room8">
                <h2>‚≠ê V√•g 8: Sj√∂stj√§rnornas Dans</h2>
                <div class="puzzle">
                    <h3>Multiplicera Br√•k</h3>
                    <p>Sj√∂stj√§rnorna multiplicerar sig:</p>
                    
                    <div class="math-box">
                        <div class="fraction">
                            <span class="fraction-top">1</span>
                            <span class="fraction-bottom">2</span>
                        </div>
                        √ó
                        <div class="fraction">
                            <span class="fraction-top">2</span>
                            <span class="fraction-bottom">3</span>
                        </div>
                        = ?
                    </div>
                    
                    <p>Skriv produkten som ett f√∂renklat br√•k (t.ex. 1/3)</p>
                    
                    <input type="text" id="answer8" placeholder="?/?">
                    <button class="btn" onclick="checkAnswer(8)">Multiplicera</button>
                    <button class="hint-btn" onclick="toggleHint(8)">üêö Havets visdom</button>
                    <div class="hint" id="hint8">
                        <strong>Fr√•n djupen:</strong> Multiplicera t√§ljarna: 1 √ó 2 = ? Multiplicera n√§mnarna: 2 √ó 3 = ?
                    </div>
                    <div class="feedback" id="feedback8"></div>
                </div>
            </div>

            <!-- V√•g 9: Rabatt -->
            <div class="room" id="room9">
                <h2>üíé V√•g 9: P√§rlans V√§rde</h2>
                <div class="puzzle">
                    <h3>Ber√§kna Rabatten</h3>
                    <p>En p√§rla kostar 400 kr. Den √§r p√• rea med 20% rabatt.</p>
                    
                    <div class="math-box">400 kr - 20% = ?</div>
                    
                    <p>Vad √§r det nya priset?</p>
                    
                    <input type="number" id="answer9" placeholder="Nya priset...">
                    <button class="btn" onclick="checkAnswer(9)">K√∂p p√§rlan</button>
                    <button class="hint-btn" onclick="toggleHint(9)">üêö Havets visdom</button>
                    <div class="hint" id="hint9">
                        <strong>Fr√•n djupen:</strong> 20% av 400 = 400 √ó 0,20 = 80. Subtrahera 80 fr√•n 400.
                    </div>
                    <div class="feedback" id="feedback9"></div>
                </div>
            </div>

            <!-- V√•g 10: J√§mf√∂ra br√•k -->
            <div class="room" id="room10">
                <h2>‚öñÔ∏è V√•g 10: J√§mf√∂relsens V√•g</h2>
                <div class="puzzle">
                    <h3>Vilket √§r St√∂rst?</h3>
                    <p>Tv√• fiskar har √§tit olika mycket plankton:</p>
                    
                    <div class="math-box">
                        <div class="fraction">
                            <span class="fraction-top">3</span>
                            <span class="fraction-bottom">5</span>
                        </div>
                        eller
                        <div class="fraction">
                            <span class="fraction-top">2</span>
                            <span class="fraction-bottom">3</span>
                        </div>
                    </div>
                    
                    <p>Vilket br√•k √§r st√∂rst? Skriv det st√∂rsta br√•ket (t.ex. 2/3)</p>
                    
                    <input type="text" id="answer10" placeholder="?/?">
                    <button class="btn" onclick="checkAnswer(10)">V√§g br√•ken</button>
                    <button class="hint-btn" onclick="toggleHint(10)">üêö Havets visdom</button>
                    <div class="hint" id="hint10">
                        <strong>Fr√•n djupen:</strong> Omvandla till decimal: 3√∑5 = 0,6 och 2√∑3 ‚âà 0,67. Vilket √§r st√∂rre?
                    </div>
                    <div class="feedback" id="feedback10"></div>
                </div>
            </div>

            <!-- V√•g 11: Decimal till procent -->
            <div class="room" id="room11">
                <h2>üåÄ V√•g 11: Virvlens Centrum</h2>
                <div class="puzzle">
                    <h3>Fr√•n Decimal till Procent</h3>
                    <p>En virvel t√§cker 0,35 av havsbottnen.</p>
                    
                    <div class="math-box">0,35 = ?%</div>
                    
                    <p>Hur m√•nga procent √§r det? (Skriv endast talet utan %)</p>
                    
                    <input type="number" id="answer11" placeholder="Procent...">
                    <button class="btn" onclick="checkAnswer(11)">Roterar genom virveln</button>
                    <button class="hint-btn" onclick="toggleHint(11)">üêö Havets visdom</button>
                    <div class="hint" id="hint11">
                        <strong>Fr√•n djupen:</strong> Multiplicera decimaltalet med 100 f√∂r att f√• procent. 0,35 √ó 100 = ?
                    </div>
                    <div class="feedback" id="feedback11"></div>
                </div>
            </div>

            <!-- V√•g 12: Procentuell f√∂r√§ndring -->
            <div class="room" id="room12">
                <h2>üìä V√•g 12: F√∂r√§ndringens Fl√∂de</h2>
                <div class="puzzle">
                    <h3>Ber√§kna Procentuell F√∂r√§ndring</h3>
                    <p>Antalet fiskar √∂kade fr√•n 50 till 75.</p>
                    
                    <div class="math-box">50 ‚Üí 75 = ?% √∂kning</div>
                    
                    <p>Hur m√•nga procent √∂kade antalet? (Heltal)</p>
                    
                    <input type="number" id="answer12" placeholder="Procent √∂kning...">
                    <button class="btn" onclick="checkAnswer(12)">Ber√§kna √∂kningen</button>
                    <button class="hint-btn" onclick="toggleHint(12)">üêö Havets visdom</button>
                    <div class="hint" id="hint12">
                        <strong>Fr√•n djupen:</strong> √ñkningen √§r 75 - 50 = 25. Procentuell √∂kning = (25 √∑ 50) √ó 100 = ?
                    </div>
                    <div class="feedback" id="feedback12"></div>
                </div>
            </div>

            <!-- V√•g 13: Division av br√•k -->
            <div class="room" id="room13">
                <h2>üî± V√•g 13: Poseidons Treudd</h2>
                <div class="puzzle">
                    <h3>Dela Br√•k</h3>
                    <p>Poseidon delar sin kraft:</p>
                    
                    <div class="math-box">
                        <div class="fraction">
                            <span class="fraction-top">1</span>
                            <span class="fraction-bottom">2</span>
                        </div>
                        √∑
                        <div class="fraction">
                            <span class="fraction-top">1</span>
                            <span class="fraction-bottom">4</span>
                        </div>
                        = ?
                    </div>
                    
                    <p>Vad blir resultatet? (Heltal)</p>
                    
                    <input type="number" id="answer13" placeholder="Resultat...">
                    <button class="btn" onclick="checkAnswer(13)">Dela kraften</button>
                    <button class="hint-btn" onclick="toggleHint(13)">üêö Havets visdom</button>
                    <div class="hint" id="hint13">
                        <strong>Fr√•n djupen:</strong> Att dela med ett br√•k = multiplicera med dess inverterade br√•k. 1/2 √∑ 1/4 = 1/2 √ó 4/1 = ?
                    </div>
                    <div class="feedback" id="feedback13"></div>
                </div>
            </div>

            <!-- V√•g 14: Blandade tal -->
            <div class="room" id="room14">
                <h2>üêö V√•g 14: Sn√§ckans Spiral</h2>
                <div class="puzzle">
                    <h3>Fr√•n Br√•k till Blandat Tal</h3>
                    <p>Omvandla detta oegentliga br√•k till ett blandat tal:</p>
                    
                    <div class="math-box">
                        <div class="fraction">
                            <span class="fraction-top">7</span>
                            <span class="fraction-bottom">3</span>
                        </div>
                        = ?
                    </div>
                    
                    <p>Skriv som blandat tal: t.ex. "2 1/3" (heltal mellanslag t√§ljare/n√§mnare)</p>
                    
                    <input type="text" id="answer14" placeholder="Heltal och br√•k...">
                    <button class="btn" onclick="checkAnswer(14)">Spiralera vidare</button>
                    <button class="hint-btn" onclick="toggleHint(14)">üêö Havets visdom</button>
                    <div class="hint" id="hint14">
                        <strong>Fr√•n djupen:</strong> Hur m√•nga hela treor finns i 7? (7 √∑ 3 = 2 med rest 1). S√•: 2 hela och 1/3.
                    </div>
                    <div class="feedback" id="feedback14"></div>
                </div>
            </div>

            <!-- V√•g 15: Slutlig utmaning -->
            <div class="room" id="room15">
                <h2>üëë V√•g 15: Skattkammarens D√∂rr</h2>
                <div class="puzzle">
                    <h3>Den Ultimata Utmaningen</h3>
                    <p>En skatt √§r v√§rd 1200 kr. Den √∂kar f√∂rst med 25%, sedan minskar med 20%.</p>
                    
                    <div class="math-box">1200 kr ‚Üí +25% ‚Üí -20% = ?</div>
                    
                    <p>Vad √§r skatten v√§rd efter b√•da f√∂r√§ndringarna?</p>
                    
                    <input type="number" id="answer15" placeholder="Slutligt v√§rde...">
                    <button class="btn" onclick="checkAnswer(15)">√ñppna skattkammaren!</button>
                    <button class="hint-btn" onclick="toggleHint(15)">üêö Havets visdom</button>
                    <div class="hint" id="hint15">
                        <strong>Fr√•n djupen:</strong> F√∂rst: 1200 √ó 1,25 = 1500. Sedan: 1500 √ó 0,80 = ? (Obs: +25% betyder √ó1,25, -20% betyder √ó0,80)
                    </div>
                    <div class="feedback" id="feedback15"></div>
                </div>
            </div>

            <!-- Victory Screen -->
            <div class="room" id="victory">
                <div class="victory">
                    <div class="emoji">üèÜüåä</div>
                    <h2>HAVET HAR GETT UPP!</h2>
                    <p>Skattkammaren √∂ppnar sig och guldmynt str√∂mmar ut i vattnet. Du har besegrat alla 15 v√•gor och bevisat din m√§sterskap √∂ver br√•k och procent!</p>
                    
                    <div class="math-box" style="margin: 40px 0; font-family: 'Quicksand', sans-serif; font-style: italic;">
                        "Den som f√∂rst√•r delar, f√∂rst√•r helheten."
                        <div style="text-align: right; margin-top: 15px; font-style: normal; color: #87ceeb;">‚Äî Havets Visdom</div>
                    </div>
                    
                    <p><strong>Din dykrtid:</strong> <span id="finalTime"></span></p>
                    
                    <p style="font-style: italic; margin-top: 35px; font-size: 1.4em;">Du b√§r nu Havets Matematiska Kunskap! üåä</p>
                    
                    <button class="btn" onclick="location.reload()">Dyk igen</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const answers = {
            1: '1/2',
            2: '0.75',
            3: '1/4',
            4: '2/3',
            5: 20,
            6: 24,
            7: 23,
            8: '1/3',
            9: 320,
            10: '2/3',
            11: 35,
            12: 50,
            13: 2,
            14: '2 1/3',
            15: 1200
        };

        let currentRoom = 0;
        let solvedRooms = 0;
        let startTime;
        let timerInterval;

        function startGame() {
            document.getElementById('startScreen').classList.remove('active');
            currentRoom = 1;
            showRoom(1);
            startTime = Date.now();
            timerInterval = setInterval(updateTimer, 1000);
        }

        function showRoom(roomNumber) {
            document.getElementById('room' + roomNumber).classList.add('active');
        }

        function updateTimer() {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
            const seconds = (elapsed % 60).toString().padStart(2, '0');
            document.getElementById('timer').textContent = `Tid: ${minutes}:${seconds}`;
        }

        function updateProgress() {
            const percentage = (solvedRooms / 15) * 100;
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressBar').textContent = `V√•g ${solvedRooms}/15`;
        }

        function checkAnswer(roomNumber) {
            let userAnswer;
            const element = document.getElementById('answer' + roomNumber);
            
            if (element.type === 'number') {
                userAnswer = parseInt(element.value);
            } else {
                userAnswer = element.value.trim().replace(/\s+/g, ' ');
            }
            
            let correctAnswer = answers[roomNumber];
            const feedback = document.getElementById('feedback' + roomNumber);

            // Normalize answers for comparison
            if (typeof userAnswer === 'string') {
                userAnswer = userAnswer.toLowerCase();
            }
            if (typeof correctAnswer === 'string') {
                correctAnswer = correctAnswer.toLowerCase();
            }

            if (userAnswer == correctAnswer) {
                feedback.className = 'feedback success';
                const messages = [
                    '‚úì Perfekt! Br√•ket √§r f√∂renklat. Vidare!',
                    '‚úì R√§tt! Decimalen √§r klar. Passage √∂ppen!',
                    '‚úì Korrekt! Procenten omvandlad. Fram!',
                    '‚úì Utm√§rkt! Br√•ken adderade. Str√∂mmen f√∂ljs!',
                    '‚úì Bravo! Sk√∂ldpaddorna √§r r√§knade. Vidare!',
                    '‚úì Perfekt! Hajen √§r undviken. Simma!',
                    '‚úì R√§tt! Temperaturen √§r m√§tt. Fram√•t!',
                    '‚úì Fantastiskt! Sj√∂stj√§rnor multiplicerade!',
                    '‚úì Utm√§rkt! P√§rlan √§r k√∂pt. Fram√•t!',
                    '‚úì Korrekt! Br√•ken v√§gda. Vidare!',
                    '‚úì Bravo! Virveln passerad. Fram!',
                    '‚úì Perfekt! F√∂r√§ndringen ber√§knad. Vidare!',
                    '‚úì M√§sterligt! Kraften delad. Fram√•t!',
                    '‚úì Utm√§rkt! Spiralen avklarad. N√§stan d√§r!',
                    '‚úì FANTASTISKT! Skatten √§r din! Du √§r m√§stare!'
                ];
                feedback.textContent = messages[roomNumber - 1];
                solvedRooms++;
                updateProgress();

                setTimeout(() => {
                    document.getElementById('room' + roomNumber).classList.remove('active');
                    if (roomNumber < 15) {
                        currentRoom = roomNumber + 1;
                        showRoom(currentRoom);
                    } else {
                        showVictory();
                    }
                }, 2000);
            } else {
                feedback.className = 'feedback error';
                feedback.textContent = '‚úó Inte r√§tt. F√∂rs√∂k igen och t√§nk efter!';
            }
        }

        function toggleHint(roomNumber) {
            const hint = document.getElementById('hint' + roomNumber);
            hint.style.display = hint.style.display === 'block' ? 'none' : 'block';
        }

        function showVictory() {
            clearInterval(timerInterval);
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('finalTime').textContent = 
                `${minutes} minut${minutes !== 1 ? 'er' : ''} och ${seconds} sekund${seconds !== 1 ? 'er' : ''}`;
            document.getElementById('victory').classList.add('active');
        }
    </script>
</body>
</html>
